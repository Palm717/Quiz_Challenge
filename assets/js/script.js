// SET GLOBAL HTML ELEMENTS-- I AM GRABBING THE ELEMENT BY ITS ATTRIBUTE FROM THE DOCUMENT DOM BY USING A DIRECT METHOD OF APPROACH RATHER THAN A TAG
var startButton = document.getElementById("start");
var questionText = document.getElementById("questions");
var answerButtons = document.getElementById("answers");
var timerElement = document.getElementById("timer");
var highScoreLink = document.getElementById("storage");

// HERE I SET THE VARIABLES THAT WERE USED IN MY QUIZ PROGRAM
var currentQuestion = 0; //INDEX THE CURRENT QUESTION FROM THE QUIZQANDA ARRAY
var score = 0; // START THE USER SCORE FROM 0
var timeLeft = 60; //START THE TIMER AT 60 AND THEN DECREMENT
var timerInterval;

// THE USER IS SHOWN A START BUTTON AT THE BEGNNING OF THE QUIZ. ON 'CLICK' THE  QUIZ BEGINS TO RUN
startButton.addEventListener("click", startQuiz); // ON CLICK RUN THE START QUIZ FUNCTION

function startQuiz() {
  // HIDES THE START BUTTON ON CLICK
  startButton.style.display = "none";

  // BEGIN DISPLAYING MY QUESTIONS TO THE USER
  displayQuestion();

  // WHILE THE QUESTIONS ARE STARTED A TIMER COUNTDOWN IS ALSO STARTED GIVING THE USER NOTIFICATION IN THE TOP RIGHT CORNER THAT THIS QUIZ IS COUNTING DOWN
  timerInterval = setInterval(function () {
    timeLeft--; // DECREMENTS BY A SINGLE SECOND AS THE QUIZ PROGRESSES
    timerElement.textContent = "Timer: " + timeLeft;

    //  STOPS THE QUIZ REGARDLESS IF THE USER HAS FINISHED QUESTIONS OR NOT BECAUSE THE TIMER HAS HIT 0 AND THE CLOCK IS OVER-- BALL GAME DONE
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      endQuiz();
    }
  }, 1000); //1 MULITPLE OF 1000MS IS A SECOND

  // AT THE END OF THE QUESTION LENGTH WITHIN ITS OBJECT THE QUIZ IS ENDED BECAUSE THERE IS NO MORE QUESTIONS TO BE ENTERTAINED
  if (currentQuestion >= quizQAndA.length) {
    //ASKS THE PROGRAM TO CHECK IF THERE'S ANY MORE QUESTIONS, SINCE THE INDEX CANNOT GO FURTHER THAN THE QUESTIONS PROVIDED THE QUIZ WILL SUBSEQUENTLY END
    endQuiz();
  }
}

// ASK THE PROGRAM TO DISPLAY QUESTIONS AND ANSWERS
function displayQuestion() {
  // CLEARS THE BUTTONS FROM ANY LINGERING ANSWERS FROM THE PREVIOUS QUESTION
  answerButtons.innerHTML = ""; //BY DOT NOTATING THE BUTTONS WITH THE INNER HTML METHOD AND ASSIGNING AN EMPTY STRING I WAS ABLE TO CLEAR THE ANSWERS

  // DISPLAY THE CURRENT QUESTION WITHIN THE TEXT CONTENT OF THE QUESTION ELEMENT THAT HAS BEEN TARGETED GLOBALLY WITH AN ID ATTRIBUTE
  questionText.textContent = quizQAndA[currentQuestion].question;

  // CREATION OF THE BUTTONS FOR THE ANSWERS BY TARGETING THE ELEMENT WITH THE ATTRIBUTE ID OF #ANSWERS
  quizQAndA[currentQuestion].answer.forEach(function (answer) {
    var button = document.createElement("button"); //CREATE A BUTTON
    button.textContent = answer; //I AM ASKING THE BUTTONS TEXT TO DISPLAY THE CORRESPONDING ANSWER FROM THE ANSWER ARRAY TO THIS BUTTON
    button.addEventListener("click", checkAnswer);
    answerButtons.appendChild(button); //PUSH THE CONTENT OF THE BUTTON TO THE ANSWER BUTTON
  });
}

// DID THE USER CREATE A CORRECT ANSWER
function checkAnswer(event) {
  var selectedAnswer = event.target.textContent; //CHECKS A CLICK EVENT ON AN ANSWER HOPEFULLY RETRIEVING A CORRECT ONE
  var correctAnswer = quizQAndA[currentQuestion].correct; // CHECKS INSIDE THE CURRENT QUESTION ARRAY AND THEN LOOPS OVER THE QUESTIONS FINDING THE CORRECT KEY AND ITS VALUE

  if (selectedAnswer === correctAnswer) {
    //IF THE CLICK EVENT IS SUCCESSFUL IT SHOULD STRICTLY EQUAL THE -CORRECT- ANSWER FROM THE CURRENT QUESTION
    score += 10; // ADDING 10 POINTS FOR A CORRECT SELECTION
  } else {
    timeLeft -= 10; // REDUCES 10 SECONDS IN THE EVENT OF AN INCORRECT ANSWER
  }

  // AFTER THE INTIAL CLICK EVENT OF THE PREVIOUS QUESTION I WANT TO MOVE ALONG TO THE NEXT QUESTION
  if (currentQuestion >= quizQAndA.length) {
    endQuiz(); //IF THE CURRENT QUESTION HAS MADE IT TO THE END AND IS NOW EQUAL TO THE LENGTH OF THE ENTIRE QUIZQANDA ARRAY THERES NOTHING LEFT TO DO BUT END THE QUIZ
  } else {
    currentQuestion++; //IF THE USER HAS NOT MADE IT TO THE LAST QUESTION AND THERE IS STILL MORE QUESTIONS TO INCREMENT OVER-- THEN MOVE ALONG AND DISPLLAY A NEW QUESTION
    displayQuestion();
  }
}

// END THE QUIZ WHILE  DISPLAYING A SCORE FOR THE USER
function endQuiz() {
  clearInterval(timerInterval); //CLEAR THE TIMER WITH AN END OF THE GAME CLOCK OF 0
  timerElement.textContent = "Timer: 0";

  // HHIDE EVERYTHING EXCEPT FOR THE SCORE
  questionText.style.display = "none";
  answerButtons.style.display = "none";

  // MAKE IT KNOWN TO THE USER WHAT THEIR SCORE WAS
  var scoreText = document.createElement("p"); //CREATE A PARAGRAPH ELEMENT THAT DISPLAYS TO THE USER THEIR SCORE
  scoreText.textContent = "Your final score is " + score;
  document.body.appendChild(scoreText);
}

//I COULD NOT GET THE SCORE OR THE LOCALSTORAGE TO WORK FOR THE LIFE OF ME
